# 按键绑定

- [按键绑定](#按键绑定)
  - [屏幕滚动](#屏幕滚动)
  - [光标移动](#光标移动)
  - [文本搜索](#文本搜索)
  - [高效编辑](#高效编辑)
  - [复制粘贴](#复制粘贴)
  - [语言服务](#语言服务)
  - [文件管理](#文件管理)
  - [窗口管理](#窗口管理)
  - [其他操作](#其他操作)

## 屏幕滚动

| 按键                  | 模式         | 动作                         |
| --------------------- | ------------ | ---------------------------- |
| `Ctrl`+`D`/`Ctrl`+`U` | **N**, **V** | 向下/上滚半屏                |
| `Ctrl`+`F`/`Ctrl`+`B` | **N**, **V** | 向下/上滚屏                  |
| `zz`/`z<Enter>`/`zb`  | **N**, **V** | 将光标行滚屏到中央/顶部/底部 |

## 光标移动

| 按键                      | 模式         | 动作                                       |
| ------------------------- | ------------ | ------------------------------------------ |
| `h`/`j`/`k`/`l`           | **N**, **V** | 左/下/上/右                                |
| `w`/`b`/`e`/`ge`          | **N**, **V** | 下个词头/上个词头/下个词尾/上个词尾 (word) |
| `W`/`B`/`E`/`gE`          | **N**, **V** | 下个词头/上个词头/下个词尾/上个词尾 (WORD) |
| `0`/`$`                   | **N**, **V** | 行首/行尾                                  |
| `f`+`{char}`/`F`+`{char}` | **N**, **V** | 下/上个字符`{char}`                        |
| `t`+`{char}`/`T`+`{char}` | **N**, **V** | 下/上个字符`{char}`之前/之后               |
| `;`/`,`                   | **N**, **V** | 重复上次`f` `F` `t` `T`                    |

| 按键               | 模式         | 动作                        |
| ------------------ | ------------ | --------------------------- |
| `gg`/`G`           | **N**, **V** | 第一行/最后一行             |
| `{num}`+`G`        | **N**, **V** | 跳转第`{num}`行             |
| `%`/`[[`/`]]`/`][` | **N**, **V** | 结对符的对端/开端/末端/内部 |
| `m`+`{mark}`       | **N**        | 设置标签 `{mark}`           |
| `'`+`{mark}`       | **N**        | 跳转标签 `{mark}`           |
| `mm`               | **N**        | 添加或删除书签              |
| `mi`               | **N**        | 添加或删除书签注释          |
| `ml`               | **N**        | 列出所有书签                |

| 按键                  | 模式  | 动作                                |
| --------------------- | ----- | ----------------------------------- |
| `Ctrl`+`O`/`Ctrl`+`I` | **N** | 上/下个跳转表历史位置（不记录跳转） |
| `g;`/`g,`             | **N** | 上/下个更改表历史位置（不记录跳转） |

> Tips:
>
> 1. 长行回绕(Wrap)模式下，一行文本可能显示为多行，使用 `gj`, `gk`, `g0`, `g$` 来在显示行中移动而非文本行；
> 2. 那些让光标移动超过一行的移动命令会在移动前记录光标位置，比如第二张表中的命令和文本搜索命令
> 3. 常用 `{marks}`
>    1. `'` 上次跳转，与`Ctrl`+`O`区别在于后者不会记录跳转历史
>    2. `[`/`]` 上次修改或复制文本的开头/结尾
>    3. `.` 上次修改
>    4. `^` 上次插入

## 文本搜索

| 按键               | 模式         | 动作                                    |
| ------------------ | ------------ | --------------------------------------- |
| `/`/`?`            | **N**        | 向下/上搜索                             |
| `*`/`#`            | **N**, **V** | 向下/上搜索光标下单词（限制单词边界）   |
| `g*`/`g#`          | **N**        | 向下/上搜索光标下单词（不限制单词边界） |
| `n`/`N`            | **N**        | 重复上次搜索                            |
| `Ctrl`+`Shift`+`F` | **N**, **V** | 在所有文件中搜索内容                    |
| `Ctrl`+`Shift`+`H` | **N**, **V** | 在所有文件中替换搜索的内容              |

## 高效编辑

> Tips: More details, see `:h motion.txt`

| 按键                                  | 模式         | 动作                     |
| ------------------------------------- | ------------ | ------------------------ |
| `i`/`a`                               | **N**        | 光标前/后插入            |
| `I`/`A`                               | **N**        | 行首/行尾插入            |
| `o`/`O`                               | **N**        | 下行/上行插入            |
| `Ctrl`+`O`                            | **I**        | 临时执行一次普通模式指令 |
| `Ctrl`+`A`/`Ctrl`+`E`                 | **I**        | 行首/行尾                |
| `Ctrl`+`L`                            | **I**        | 光标右移一个单词         |
| `Ctrl`+`D`/`Ctrl`+`T`                 | **I**        | 左/右移本行              |
| `Ctrl`+`Shift`+`J`/`Ctrl`+`Shift`+`K` | **I**, **N** | 下/上移本行              |
| `Ctrl`+`J`                            | **I**, **N** | 在下面新增空行           |
| `Ctrl`+`H`                            | **I**        | 删除光标前字符           |
| `Ctrl`+`W`                            | **I**        | 删除光标前单词           |
| `Ctrl`+`U`/`Ctrl`+`K`                 | **I**        | 删除光标前/后的本行内容  |
| `Ctrl`+`Z`                            | **I**        | 撤销                     |
| `Ctrl`+`Shift`+`Z`                    | **I**        | 重做                     |

| 按键                           | 模式         | 动作                                   |
| ------------------------------ | ------------ | -------------------------------------- |
| `<Esc>`                        | **I**        | 返回 normal 模式                       |
| `gu`/`gU`/`g~`                 | **N**, **V** | (Operator) 小写/大写/反转大小写        |
| `~`                            | **N**, **V** | 反转光标下字符大小写                   |
| `d`                            | **N**, **V** | (Operator) 删除                        |
| `D`                            | **N**        | 删除直到行尾                           |
| `dd`                           | **N**        | 删除当前行                             |
| `x`                            | **N**        | 删除光标下字符                         |
| `X`                            | **N**        | 删除光标前字符                         |
| `c`                            | **N**, **V** | (Operator) 删除并插入                  |
| `C`                            | **N**        | 删除直到行尾并插入                     |
| `cc`                           | **N**        | 删除当前行并插入                       |
| `s`                            | **N**        | 删除光标下字符并插入                   |
| `r`                            | **N**, **V** | 替换光标下字符                         |
| `R`                            | **N**        | 替换直到退出                           |
| `ds`+`{char}`                  | **N**        | 删除结对符                             |
| `cs`+`{old-char}`+`{new-char}` | **N**        | 替换结对符                             |
| `ys`+`{text-obj}`+`{char}`     | **N**        | 添加结对符                             |
| `J`                            | **N**        | 连接下行至本行                         |
| `<`/`>`                        | **N**, **V** | 左/右移本行                            |
| `Ctrl`+`A`/`Ctrl`+`X`          | **N**        | 递增/减光标下数字                      |
| `q`+`{reg}`                    | **N**        | 录制宏                                 |
| `@`+`{reg}`                    | **N**        | 应用宏                                 |
| `Q`                            | **N**        | 应用上次录制的宏                       |
| `@@`                           | **N**        | 应用上次使用的宏                       |
| `.`                            | **N**        | 重复上次修改操作                       |
| `u`                            | **N**        | 撤销                                   |
| `U`                            | **N**        | 撤销最后修改行的所有操作（被视作修改） |
| `Ctrl`+`R`                     | **N**        | 重做                                   |

| 按键               | 模式         | 动作                                     |
| ------------------ | ------------ | ---------------------------------------- |
| `v`                | **N**        | (Operator) 进入 visual character 模式    |
| `V`                | **N**        | 进入 visual line 模式                    |
| `Ctrl`+`V`         | **N**        | 进入 visual block 模式                   |
| `v`                | **V**        | 自动扩张选择范围                         |
| `mc`               | **N**, **V** | (Operator) 选中文本并创建光标            |
| `mcc`              | **N**        | 取消多光标                               |
| `mc/`              | **N**        | 输入正则表达式然后选择匹配文本并创建光标 |
| `I`/`A`            | **N**, **V** | 在选中文本的首/尾插入                    |
| `Ctrl`+`N`         | **N**, **V** | 选中下个匹配词并添加光标                 |
| `Ctrl`+`Shift`+`N` | **N**, **V** | 选中上个匹配词并添加光标                 |
| `Ctrl`+`Shift`+`L` | **N**, **V** | 选中所有匹配词并添加光标                 |

## 复制粘贴

| 按键                            | 模式         | 动作                          |
| ------------------------------- | ------------ | ----------------------------- |
| `"`+`{reg}`+`y`                 | **N**, **V** | 复制到 `{reg}`                |
| `"`+`{reg}`+`p`/`"`+`{reg}`+`P` | **N**, **V** | 粘贴 `{reg}` 到光标后/前      |
| `Ctrl`+`R`+`{reg}`              | **I**        | 粘贴 `{reg}` 到光标位置       |
| `p`/`P`                         | **N**        | 粘贴 `"` 到光标后/前          |
| `y`                             | **N**, **V** | 复制到 `0`                    |
| `yy`                            | **N**        | 复制本行到 `0`                |
| `zp`/`zP`                       | **N**, **V** | 粘贴 `0` 到光标后/前          |
| `zo`/`zO`                       | **N**        | 粘贴 `0` 到下/上行            |
| `zg`                            | **N**        | 将 `0` 复制到 `+`             |
| `gy`                            | **N**, **V** | 复制 `+`                      |
| `gyy`                           | **N**        | 复制本行到 `+`                |
| `gp`/`gP`                       | **N**, **V** | 粘贴 `+` 到光标后/前          |
| `go`/`gO`                       | **N**        | 粘贴 `+` 到下/上行            |
| `Ctrl`+`C`                      | **V**        | 复制到 `+`                    |
| `Ctrl`+`V`                      | **I**        | 粘贴 `+`                      |
| `Space`+`by`                    | **N**        | 复制当前文件所有内容到 `+`    |
| `Space`+`bp`                    | **N**        | 粘贴 `+` 覆盖当前文件所有内容 |

> Registers:
>
> 1. `+`: system clipboard
> 2. `"`: laste delet, changed or yank
> 3. `0`: last yank
> 4. `1~9`: recent delete longer than one line
> 5. `-`: last delete shorter than one line
> 6. `.`: last inserted text

## 语言服务

| 按键               | 模式                | 动作                                                   |
| ------------------ | ------------------- | ------------------------------------------------------ |
| `Ctrl`+`I`         | **I**               | 手动开关补全列表                                       |
| `Ctrl`+`N`         | **I**               | 下个补全项                                             |
| `Ctrl`+`P`         | **I**               | 上个补全项                                             |
| `Tab`              | **I**               | 选中补全项（插入），或展开代码片段，或跳转下个片段锚点 |
| `Shift`+`Tab`      | **I**               | 选中补全项（替换），或跳转上个片段锚点                 |
| `Alt`+`Shift`+`F`  | **N**, **I**, **V** | 格式化文本                                             |
| `Ctrl`+`/`         | **N**               | 注释本行代码                                           |
| `Ctrl`+`.`         | **N**               | 代码动作                                               |
| `F2`               | **N**               | 重命名符号                                             |
| `gd`/`gD`          | **N**               | 跳转定义或声明                                         |
| `gr`               | **N**               | 跳转引用                                               |
| `gI`               | **N**               | 跳转实现                                               |
| `K`                | **N**               | 触发悬停信息                                           |
| `Ctrl`+`Shift`+`O` | **N**               | 搜索本地标签                                           |
| `Ctrl`+`T`         | **N**               | 搜索全局标签                                           |
| `[d`/`]d`          | **N**               | 跳转上/下个诊断问题                                    |
| `]c`/`[c`          | **N**               | 下/上个 diff change 或 git hunk                        |

> Tips:
>
> 1. vscode 中 `Ctrl+K Ctrl+I` 可以 focus 悬浮窗，在其中可以使用 `j/k` 来滚动

## 文件管理

| 按键                       | 模式  | 动作                             |
| -------------------------- | ----- | -------------------------------- |
| `H`/`L`                    | **N** | 切换上/下一个文件                |
| `Ctrl`+`Tab`/`Space`+`Tab` | **N** | 切换最近编辑文件 (vscode/neovim) |
| `Ctrl`+`P`                 | **N** | 搜索并打开文件                   |
| `Ctrl`+`Shift`+`R`         | **N** | 搜索最近打开文件                 |
| `Ctrl`+`S`                 | **N** | 保存                             |
| `Ctrl`+`Shift`+`S`         | **N** | 另存为                           |
| `:wa`                      | **C** | 保存所有文件                     |
| `Ctrl`+`Shift`+`W`         | **N** | 关闭当前文件 (vscode)            |
| `Ctrl`+`Shift`+`T`         | **N** | 重新打开刚关闭的文件 (vscode)    |

| Explorer 按键 | 动作            |
| ------------- | --------------- |
| `h`/`l`       | 折叠/展开或打开 |
| `j`/`k`       | 下/上移动       |
| `a`           | 新建文件        |
| `A`           | 新建目录        |
| `r`           | 重命名          |
| `d`           | 删除            |
| `x`           | 剪切            |
| `y`           | 复制            |
| `p`           | 粘贴            |

> Tips: vim 中文件数新建文件和新建目录都是 `a`，文件名以`/`或`\`结尾就是目录

## 窗口管理

| 按键                   | 模式  | 动作                                       |
| ---------------------- | ----- | ------------------------------------------ |
| `Tab`/`Shift`+`Tab`    | **N** | 跳转下/上个窗口                            |
| `Ctrl`+`W` `h`         | **N** | 跳转左边的窗口，其他方向同理               |
| `Ctrl`+`W` `Shift`+`H` | **N** | 将当前窗口与左边窗口交换位置，其他方向同理 |
| `Ctrl`+`W` `=`         | **N** | 均布窗口大小                               |
| `Ctrl`+`W` `v`         | **N** | 竖直切分                                   |
| `Ctrl`+`W` `s`         | **N** | 水平切分                                   |
| `Ctrl`+`W` `o`         | **N** | 关闭其他窗口                               |
| `Ctrl`+`W` `c`         | **N** | 关闭当前窗口                               |

> Tips: 当键盘焦点未聚焦于 vscode editor 时，neovim 按键不会生效，这时可按`Ctrl+1`回到第一个 vscode editor

## 其他操作

| 按键               | 模式  | 动作                     |
| ------------------ | ----- | ------------------------ |
| `ga`               | **N** | 查看 unicode 码点        |
| `g8`               | **N** | 查看 utf-8 编码          |
| `za`               | **N** | 切换折叠                 |
| `Alt`+`Z`          | **N** | 是否长行回绕             |
| `Alt`+`E`          | **N** | 从系统文件管理器打开目录 |
| `Ctrl`+`Shift`+`P` | **N** | 搜索命令                 |
